var gallerygrid__sizes=[],gallerygrid__debuging=1;$.fn.gallerygridfield=function(){function l(l){window.console&&gallerygrid__debuging&&console.log("[gallerygrid] "+l)}function e(){y++,($(n).length||5==y)&&(clearInterval(u),$("#gallerygrid_toggle").length||5==y?l("no assests found on this page"):(a(),g()),l("all routines stopped")),l("checking for context menu ["+y+"]")}function a(){r="grid"==d?"fa-toggle-on":"fa-toggle-off",$(o).prev("h2").find(_).prepend('<a href="#" id="gallerygrid_toggle"><i class="icon icon-left fa '+r+'"></i><span>Grid</span></a>'),$("#gallerygrid_toggle").on("click",function(l){l.preventDefault(),s=$("i",this).hasClass("fa-toggle-on")?!0:!1,r=s?"fa-toggle-off":"fa-toggle-on",i=s?"gallerygrid_disabled":"gallerygrid_enabled",d=s?"list":"grid",localStorage.setItem(t+"_state",d),$(o).removeClass("gallerygrid_enabled gallerygrid_disabled").addClass(i),$("i",this).removeClass("fa-toggle-on fa-toggle-off").addClass(r)})}function g(){i="grid"==d?"gallerygrid_enabled":"gallerygrid_disabled",$(o).addClass(i+" gallerygrid_size_"+kirbyGalleryGrid),$(f).each(function(e){n=$(this).data("url"),null==n?$("i",this).addClass("gallerygrid__no_image_source"):(n=n.replace(c,"="+gallerygrid__sizes[kirbyGalleryGrid]),$("i",this).css({"background-image":"url('"+n+"')"})),l("image : "+n)})}var i,r,d,s,t="gallerygrid",n="ul.nav.nav-list.sidebar-list > li > a.draggable.ui-draggable.ui-draggable-handle",o=".nav-list.sidebar-list:last-of-type",f=".nav-list.sidebar-list li a.draggable",_=".hgroup-option-right",c=/=75/g;gallerygrid__sizes.s=50,gallerygrid__sizes.m=75,gallerygrid__sizes.l=100,d=null!=localStorage.getItem(t+"_state")?localStorage.getItem(t+"_state"):"grid",l("state : "+d),$("div.field-gallerygrid").remove();var y=0,u=setInterval(function(){e()},1e3);l("initialized")};